<script src="https://code.jquery.com/jquery-3.6.0.min.js" defer></script>

<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" defer>

<script
  type="text/javascript"
  src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"
  defer
></script>

{%- liquid
  assign ratio = 1
  if card_product.featured_media and media_aspect_ratio == 'portrait'
    assign ratio = 0.8
  elsif card_product.featured_media and media_aspect_ratio == 'adapt'
    assign ratio = card_product.featured_media.aspect_ratio
  endif
  if ratio == 0 or ratio == null
    assign ratio = 1
  endif
-%}

<product-card
  class="product-card card--{{ settings.card_style }}{% if settings.card_style == 'card' %} color-{{ settings.card_color_scheme }}{% endif %}"
  data-product-id="{{ card_product.id }}"
>
  <div class="product-card-child">
    <a
      href="{{ card_product.url }}"
      class="card-media"
      style="--media-ratio: {{ 1 | divided_by: ratio | times: 100 }}%;"
    >
      <div class="card-media-child">
        {% if card_product.images.size > 1 %}
          <div class="card-media-slider">
            {% for image in card_product.images %}
              <div class="card-media-image">
                <img src="{{image| img_url: "master" }}" alt="{{image.alt}}" width="" height="">
              </div>
            {% endfor %}
          </div>

        {% else %}
          {{
            card_product.featured_image
            | image_url: width: card_product.featured_image.width
            | image_tag:
              width: card_product.featured_image.width,
              height: card_product.featured_image.height,
              alt: card_product.featured_media.alt,
              data-product-image: card_product.id
            | escape
          }}
        {% endif %}
      </div>
    </a>

    <div class="card-information">
      <div class="desktop-card-information">
          <a href="{{ card_product.url }}">{{ card_product.title }}</a>
        <div class="card-pricing">
          {% render 'price', product: card_product, show_compare_at_price: true %}
        </div>
      </div>
    </div>
  </div>
</product-card>

<script>
  $(document).ready(function () {
    $('.card-media-slider').slick({
      dots: true,
      arrows: false,
      fade: false,
      speed: 900,
      slidesToShow: 1,
      slidesToScroll: 1,
      cssEase: 'linear',
      easing: 'linear',
    });
  });
</script>
